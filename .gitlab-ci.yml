# .gitlab-ci.yml
image: python:3.11

stages:
  - deploy

deploy_streamlit:
  stage: deploy
  only: [main, master]
  script:
    - pip install streamlit
    - curl -X POST "https://api.streamlit.io/v1/apps/deploy" \
        -H "Authorization: Bearer $STREAMLIT_DEPLOY_TOKEN" \
        -F "repo=https://gitlab.com/$CI_PROJECT_PATH.git" \
        -F "branch=$CI_COMMIT_BRANCH" \
        -F "file=app.py"
  environment:
    name: production
    url: https://your-app.streamlit.app
